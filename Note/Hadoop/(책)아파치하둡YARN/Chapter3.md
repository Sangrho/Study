#### 3장 아파치 하둡 YARN의 핵심 개념   
순전히 자원 스케줄러의 기능만 하는 새로운 리소스매니저가 클러스터 자원을 유일하게 중재한다.  
맵리듀스 잡을 갖는 사용자 어플리케이션은 새로운 어플리케이션 마스터 컴포넌트를 통해 특정 자원을 요청한다.  
다음으로 애플리케이션마스터는 클러스터 내에 애플리케이션 컨테이너를 생성하려고 리소스매니저와 통신한다.  
  
  
##### 맵리듀스의 한계를 넘어   
  
##### 맵리듀스 패러다임   
맵리듀스 처리 모델은 두 가지의 분리된 단계로 구성된다.  
1. 병렬 맵 단계로, 입력 데이터를 독립적으로 처리할 수 있는 별도의 청크로 분할한다.  
2. 맵 단계의 출력을 원하는 결과로 집계하는 리듀스 단계다.  
  
하둡 성능의 핵심 중 하나는 컴퓨팅의 서버로 데이터를 이동시키는 것이 아니라 컴퓨팅 태스크가 데이터가 있는 곳으로 이동하는 것이다.  
구체적으로 맵리듀스 태스크는 클러스터의 기본 스토리지 레이아웃에 있는 데이터가 위치한 HDFS 와 동일한 물리 노드에서 스케줄링될 수 있다.  
##### 아파치 하둡 맵리듀스   
  
##### 비맵리듀스 워크로드의 필요성   
  
##### 확장성 해결   
  
##### 개선된 이용률   
  
##### 사용자 민첩성   
  
##### 아파치 하둡 YARN   
YARN 의 기본적인 아이디어는 잡트래커의 두 가지 중요한 뿐의 책임을 분리하는 것이다.  
즉, 자원 관리를 하는 글로벌 리소스매니저와 애플리케이션별 스케줄링과 모니터릉을 하는 애플리케이션마스터 데몬으로 분리한다.  
리소스매니저와 노트별 슬레이브인 노드매니저는 분산 방식에서 애플리케이션을 관리할 수 있는 새롭고 일반적인 운영체제를 형성한다.  
  
리소스매니저는 시스템의 모든 애플리케이션 사이에서 자원 분할을 조정하는 궁극적인 권한을 갖고 있다.  
애플리케이션 별 애플리케이션 마스터는 실제로 프레임워크에 가깝고, 리소스매니저와 자원에 대해 교섭하는 일을하며,  
컴포넌트 태스크를 실행하고 모니터링을 하는 노드매니저와 동작한다.  
  
리소스매니저는 플러그인할 수 있는 스케줄러 컴포넌트를 갖고 있는데, 이는 메모리와 CPU, 디스크 그리고 네트워크 같은 자원을 통합한 자원 컨테이너의 추상 개념을 사용해 애플리케이션의 자원 요구 사항에 따라 스케줄링 기능을 수행한다.  
  
노드매니저는 머신별 슬레이브로 애플리케이션 컨테이너 실행과 자원의 사욜률 모니터링, 그리고 이런 내역을 리소스매니저에게 보고하는 역할을 담당한다.  
  
애플리케이션별 애플리케이션마스터는 애플리케이션의 상태 확인과 진행 상태를 모니터링 해 스케줄러로부터 적절한 자원 컨테이너의 교섭을 책임진다.  
  
![image](https://user-images.githubusercontent.com/4033129/76087293-34780e00-5ff9-11ea-9500-eadc0a418c3f.png)  
  
##### YARN 컴포넌트   
  
  
  
##### 리소스매니저   
리소스매니저는 정말 순수 스케줄러다. 어플리케이션이 경합하는 시스템에서 사용 가능한 자원의 요청을 중재하는 것으로 엄격히 제한돼 있다.  
##### 애플리케이션마스터   
  
##### 자원 모델   
  
##### 리소스리퀘스트와 컨테이너   
YARN 은 애플리케이션 마스터를 통해 개별 애플리케이션이 공유와 보안, 멀티태넌시 방식으로 클러스터 자원을 활용할 수 있게 설계됐다.  
또한 YARN은 가능한 범위에서 애플리케이션 데이터 이동을 줄이기 위해 데이터 접근을 효율적으로 스케줄링하고 최적화 하려고 클러스터 토폴로지를 인식한다.  
  
리소스매니저의 중앙 스케줄러는 클러스터의 모든 애플리케이션이 더 나은 결정을 할 수 있게 자원 요구의 상세 정보를 관리한다.  
이것은 리소스리퀘스트와 최종 컨테이너를 만들어낸다.  
  
최종적으로 애플리케이션은 자원 요청을 충족시키기 위해서 애플리케이션마스터를 통해 특정 자원을 요청할 수 있다.  
스케줄러는 초기자원 요청에서 애플리케이션마스터가 계획한 요구를 만족시키는 컨테이너를 할당함으로써 자원 요청에 응답한다.  
리로스 리퀘스트는 다음과 같은 형식을 갖는다.  
<resource-name, priority, resource-requirement, number-of-containers>  
  
결국 컨테이너는 리소스매니저가 특정 리소스리퀘스트를 부여해 성공적으로 자원을 할당한다. 컨테이너는 특정 호스트의 메모리와 CPU 같은 지정된 자원을 사용하기 위해 애플리케이션에게 권리를 부여한다.  
  
애플리케이션마스터는 컨테이너를 취하고, 태스크를 실행할 목적으로 필요한 자원을 사용하기 위해 컨테이너가 할당된 호스트를 관리하는 노드매니저에게 알려야한다.  
보안상의 이유로 컨테이너의 할당은 애플리케이션마스터가 클러스터에서 할당하지 못하게 보안모드에서 검증된다.  
  
##### 컨테이너 명세   
컨테이너는 단순히 클러스터의 특정머신(노드매니저)에서 명시된 자원을 사용하는 권한이며,  
애플리케이션 마스터는 실제로 컨테이너를 시작하려고 노드매니저에게 더 많은 정보를 제공해야 한다.  
YARN 은 애플리케이션이 어떤 프로세스를 시작하는 것을 허용하고, 기존 하둡 맵리듀스와는 달리 이 기능은 자바 애플리케이션에 국한되지 않는다.
