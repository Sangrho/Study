### CHAPTER 17 스파크 배포 환경   
#### 17.1 스파크 애플리케이션 실행을 위한 클러스터 환경   
#### 17.2 클러스터 매니저   
##### 17.2.2 YARN 에서 스파크 실행하기  
하둡 YARN 은 잡 스케줄링과 클러스터 자원 관리용 프레임워크이다.  
스파크를 하둡 에코 시스템의 일부로 착각해 잘못 분류하는 경우가 많다. 하지만 스파크늖 하둡과 거의 관련이 없다.  
  
##### 17.2.3 YARN 환경의 스파크 애플리케이션 설정하기  
* 하둡 설정  
스파크를 이용해 HDFS 의 파일을 읽고 쓰려면 스파크 클래스패스에 두 개의 하둡 설정 파일을 포함시켜야 한다.  
1. hdfs-site.xml : HDFS 클라이언트의 동작 방식을 결정하는 파일  
2. 기본 파일 시스템의 이름을 설정하는 파일  
  
##### 17.2.4 메소스에서 스파크 실행하기  
* 메소스 프로젝트의 정의  
아파치 메소스는 CPU, 메모리, 저장소 그리고 다른 연산 자원을 머신에서 추상화 한다.  
이를 통해 Fault-tolerant 및 탄력적 분산 시스템을 쉽게 구성하고 효과적으로 실행할 수 있다.  
  
메소스는 스파크에서 지원하는 클러스터 매니저 중 가장 무겁다.  
대규모의 메소스 배포환경이 있는 경우에만 사용하는 것이 좋다.  
  
##### 17.2.7 애플리케이션 스케줄링  
1. 각 스파크 애플리케이션은 독립적인 익스큐터 프로세스를 실행한다.  
2. 스파크 애플리케이션에서 여러 개의 잡을 다른 스레드가 제출한 경우 동시에 실행할 수 있다.  
Faire Scheduler 기능을 제공한다.  
동적할당 기능을 제공한다.  
* 동적할당  
1. spark.dynamicAllocation.enabled 을 true 로 지정한다.  
2. spark.shuffle.service.enabled 을 true 로 지정한다. 이는 클러스터를 구성하는 워커 노드에서 외부 셔플 서비스를 사용하도록 설정하는 것이다.  
  
#### 17.3 기타 고려사항   
스파크는 셔플 블록(셔플 결과) 를 특정 노드의 로컬 디스크에 저장한다.  
외부 셔플 서비스를 이요하면 모든 익스큐터가 외부 셔플 서비스에 셔플 블록을 저장한다. 따라서 익스큐터를 임의로 Kill 해도 다른 애플리케이션에서 셔플 결과를 사용할 수 있다.  
  
#### 17.4 정리 
